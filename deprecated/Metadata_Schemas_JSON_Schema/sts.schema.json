{
    "@context": {
        "schema": "http://schema.org/",
        "emmo": "https://w3id.org/emmo#",
        "emmo-da": "http://emmo.info/domain-atomistic#",
        "emmo-chameo": "https://w3id.org/emmo-chameo/chameo#",
        "chmo": "http://purl.obolibrary.org/obo/chmo.owl#",
        "fairmat-sts": "https://fairmat-nfdi.github.io/nexus_definitions/classes/contributed_definitions/NXsts.html#",
        "reprme": "https://w3id.org/reproduceme#",
        "type": "@type",
        "name": "schema:name",
        "recording_time": "ncit:NCIT_C78441",
        "duration": "ncit:NCIT_C25330",
        "experiment_type": "fairmat-sts:nxsts-entry-experiment-type-field",
        "acquisition_coordinate_x": "fairmat-sts:nxsts-entry-instrument-environment-position-x-field",
        "acquisition_coordinate_y": "fairmat-sts:nxsts-entry-instrument-environment-position-y-field",
        "acquisition_coordinate_z": "fairmat-sts:nxsts-entry-instrument-environment-position-z-field",
        "bias_setpoint": "fairmat-sts:nxsts-entry-reproducibility-indicators-bias-field",
        "bias_calibration_factor": "fairmat-sts:nxsts-entry-reproducibility-indicators-bias-calibration-field",
        "bias_calibration_offset": "fairmat-sts:nxsts-entry-reproducibility-indicators-bias-offset-field",
        "current_setpoint": "fairmat-sts:nxsts-entry-reproducibility-indicators-current-field",
        "current_calibration_factor": "fairmat-sts:nxsts-entry-reproducibility-indicators-current-calibration-field",
        "current_calibration_offset": "fairmat-sts:nxsts-entry-reproducibility-indicators-current-offset-field",
        "current_gain": "fairmat-sts:nxsts-entry-reproducibility-indicators-current-gain-field",
        "feedback_active": "fairmat-sts:nxsts-entry-reproducibility-indicators-z-controller-status-field",
        "final-z": "fairmat-sts:nxsts-entry-reproducibility-indicators-final-z-field",
        "filter_type": "reprme:FilterType",
        "filter_cutoff": "ncit:NCIT_C94895",
        "num_pixel": "fairmat-sts:nxsts-entry-instrument-environment-sweep-control-bias-spectroscopy-num-pixel-field",
        "z_avg_time": "fairmat-sts:nxsts-entry-instrument-environment-sweep-control-bias-spectroscopy-z-avg-time-field",
        "first_settling_time": "fairmat-sts:nxsts-entry-reproducibility-indicators-first-settling-time-field",
        "settling_time": "fairmat-sts:nxsts-entry-reproducibility-indicators-settling-time-field",
        "integration_time": "fairmat-sts:nxsts-entry-instrument-environment-sweep-control-bias-spectroscopy-integration-time-field",
        "end_settling_time": "fairmat-sts:nxsts-entry-reproducibility-indicators-end-settling-time-field",
        "z_control_time": "fairmat-sts:nxsts-entry-reproducibility-indicators-z-control-time-field",
        "max_slew_rate": "fairmat-sts:nxsts-entry-reproducibility-indicators-max-slew-rate-field",
        "backward_sweep": "fairmat-sts:nxsts-entry-reproducibility-indicators-backward-sweep-field",
        "num_sweeps": "fairmat-sts:nxsts-entry-resolution-indicators-number-of-sweeps-field",
        "record_final_z": "fairmat-sts:nxsts-entry-reproducibility-indicators-final-z-field",
        "bias_spectroscopy_sweep_start": "fairmat-sts:nxsts-entry-instrument-environment-sweep-control-bias-spectroscopy-sweep-start-field",
        "bias_spectroscopy_sweep_end": "fairmat-sts:nxsts-entry-instrument-environment-sweep-control-bias-spectroscopy-sweep-end-field",
        "bias_spectroscopy_z_offset": "fairmat-sts:nxsts-entry-reproducibility-indicators-z-offset-field",
        "bias_spectroscopy_z_controller_hold": "fairmat-sts:nxsts-entry-reproducibility-indicators-z-control-hold-field",
        "z": "faitmat-sts:nxsts-entry-instrument-environment-position-z-controller-z-field",
        "feedback_type": "fairmat-sts:nxsts-entry-reproducibility-indicators-z-controller-name-field",
        "z_controller_setpoint": "faitmat-sts:nxsts-entry-reproducibility-indicators-z-controller-setpoint-field",
        "z_controller_p_gain": "faitmat-sts:nxsts-entry-reproducibility-indicators-z-control-p-gain-field",
        "z_controller_i_gain": "faitmat-sts:nxsts-entry-reproducibility-indicators-z-control-i-gain-field",
        "z_controller_time_constant": "faitmat-sts:nxsts-entry-reproducibility-indicators-z-control-time-const-field",
        "z_controller_tip_lift": "faitmat-sts:nxsts-entry-reproducibility-indicators-z-control-tip-lift-field",
        "z_controller_switch_off_delay": "faitmat-sts:nxsts-entry-reproducibility-indicators-z-control-switchoff-delay-field",
        "lock_in_status": "faitmat-sts:nxsts-entry-instrument-lock-in-status-field",
        "lock_in_modulated_signal": "faitmat-sts:nxsts-entry-instrument-lock-in-modulation-signal-field",
        "lock_in_frequency": "faitmat-sts:nxsts-entry-instrument-lock-in-modulation-frequency-field",
        "lock_in_amplitude": "faitmat-sts:nxsts-entry-instrument-lock-in-modulation-amplitude-field",
        "lock_in_demodulated_signal": "faitmat-sts:nxsts-entry-instrument-lock-in-demodulated-signal-field",
        "lock_in_harmonics": "faitmat-sts:nxsts-entry-instrument-lock-in-harmonic-order-n-field",
        "lock_in_reference_phases": "faitmat-sts:nxsts-entry-instrument-lock-in-ref-phase-n-field",
        "wfms_uuid": "ncit:NCIT_C54100",
        "annealing": "chmo:CHMO_0001310",
        "deposition": "chmo:CHMO_0001310",
        "instrument": "ncit:NCIT_C16742",
        "value": "schema:value",
        "unit": "schema:unitCode",
        "comments": "schema:comment"
    },
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://example.com/sts.schema.json",
    "title": "STS",
    "openBISCode": "STS",
    "description": "Scanning Tunnelling Spectroscopy",
    "type": "object",
    "properties": {
        "type": {
            "type": "string",
            "const": "faitmat-sts:nxsts"
        },
        "name": {
            "title": "Name",
            "type": "string",
            "openBISType": "VARCHAR",
            "description": "Name"
        },
        "recording_time": {
            "title": "Recording time",
            "type": "string",
            "openBISType": "TIMESTAMP",
            "description": "Recording time",
            "format": "date-time"
        },
        "duration": {
            "title": "Duration",
            "type": "object",
            "openBISType": "JSON",
            "description": "Duration",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "experiment_type": {
            "title": "Experiment type",
            "type": "string",
            "openBISType": "CONTROLLEDVOCABULARY",
            "description": "Experiment type",
            "enum": ["Bias spectroscopy", "Z-spectroscopy"]
        },
        "acquisition_coordinate_x": {
            "title": "Acquisition coordinate x",
            "type": "object",
            "openBISType": "JSON",
            "description": "Acquisition coordinate X-axis",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "acquisition_coordinate_y": {
            "title": "Acquisition coordinate y",
            "type": "object",
            "openBISType": "JSON",
            "description": "Acquisition coordinate Y-axis",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "acquisition_coordinate_z": {
            "title": "Acquisition coordinate z",
            "type": "object",
            "openBISType": "JSON",
            "description": "Acquisition coordinate Z-axis",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "final_z": {
            "title": "Final Z",
            "type": "object",
            "openBISType": "JSON",
            "description": "Final Z",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "filter_type": {
            "title": "Filter type",
            "type": "string",
            "openBISType": "CONTROLLEDVOCABULARY",
            "description": "Filter type",
            "enum": ["Butterworth"]
        },
        "filter_order": {
            "title": "Filter order",
            "type": "integer",
            "openBISType": "INTEGER",
            "description": "Filter order",
            "minimum": 1
        },
        "filter_cutoff": {
            "title": "Filter cutoff",
            "type": "object",
            "openBISType": "JSON",
            "description": "Filter cutoff",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "bias_setpoint": {
            "title": "Bias setpoint",
            "type": "object",
            "openBISType": "JSON",
            "description": "Bias voltage setpoint",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "bias_calibration_factor": {
            "title": "Bias calibration factor",
            "type": "object",
            "openBISType": "JSON",
            "description": "Bias voltage calibration factor",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "bias_calibration_offset": {
            "title": "Bias calibration offset",
            "type": "object",
            "openBISType": "JSON",
            "description": "Bias voltage calibration offset",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "num_pixel": {
            "title": "Number of pixels",
            "type": "integer",
            "minimum": 1,
            "openBISType": "INTEGER",
            "description": "Number of recorded points"
        },
        "z_avg_time": {
            "title": "Z average time",
            "type": "object",
            "openBISType": "JSON",
            "description": "Duration over which the Z position is recorded and averaged before and after the sweep",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "first_settling_time": {
            "title": "First settling time",
            "type": "object",
            "openBISType": "JSON",
            "description": "Additional time to wait (in addition to the Settling Time) after the bias has ramped to the starting point of the sweep",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "settling_time": {
            "title": "Settling time",
            "type": "object",
            "openBISType": "JSON",
            "description": "Time to wait after changing the bias to the next level and before starting to acquire data",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "integration_time": {
            "title": "Integration time",
            "type": "object",
            "openBISType": "JSON",
            "description": "Time during which the data are acquired and averaged",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "end_settling_time": {
            "title": "End settling time",
            "type": "object",
            "openBISType": "JSON",
            "description": "Time to wait after the sweep has finished and the bias is ramped to the initial value",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "z_control_time": {
            "title": "Z-Controller time",
            "type": "object",
            "openBISType": "JSON",
            "description": "Time during which the Z-controller is enabled once a sweep has finished",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "max_slew_rate": {
            "title": "Max slew rate",
            "type": "object",
            "openBISType": "JSON",
            "description": "Max rate at which the bias changes (before, during and after sweeping)",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "backward_sweep": {
            "title": "Backward sweep",
            "type": "boolean",
            "openBISType": "BOOLEAN",
            "description": "Whether one wants to measure the backward (return) sweep or the forward only"
        },
        "num_sweeps": {
            "title": "Number of sweeps",
            "minimum": 0,
            "type": "integer",
            "openBISType": "INTEGER",
            "description": "Number of sweeps to measure and average"
        },
        "channel_names": {
            "title": "Channel names",
            "type": "array",
            "openBISType": "ARRAY_STRING",
            "items": {
                "type": "string"
            },
            "description": "Recorded channel names"
        },
        "record_final_z": {
            "title": "Record final Z",
            "type": "boolean",
            "openBISType": "BOOLEAN",
            "description": "Record the Z position during Z averaging time at the end of the sweep (after Z control time)"
        },
        "lock_in_run": {
            "title": "Lock-in run",
            "type": "integer",
            "openBISType": "INTEGER",
            "description": "Lock-in to run during the measurement"
        },
        "bias_spectroscopy_reset_bias": {
            "type": "boolean",
            "description": "Reset bias to the initial value (before starting the sweep) at the end of the spectroscopy measurement"
        },
        "bias_spectroscopy_sweep_start": {
            "title": "Bias spectroscopy sweep start",
            "type": "object",
            "openBISType": "JSON",
            "description": "Bias spectroscopy sweep start",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "bias_spectroscopy_sweep_end": {
            "title": "Bias spectroscopy sweep end",
            "type": "object",
            "openBISType": "JSON",
            "description": "Bias spectroscopy sweep end",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "bias_spectroscopy_z_offset": {
            "title": "Bias spectroscopy Z-offset",
            "type": "object",
            "openBISType": "JSON",
            "description": "Bias spectroscopy Z-offset",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "bias_spectroscopy_z_controller_hold": {
            "type": "boolean",
            "openBISType": "BOOLEAN",
            "description": "If Z-controller is being used"
        },
        "z_spectroscopy_reset_z": {
            "type": "boolean",
            "openBISType": "BOOLEAN",
            "description": "Reset the Z position at the end of the sweep to the initial averaged value calculated during Z averaging time at Max slew rate"
        },
        "z_spectroscopy_initial_z_offset": {
            "type": "object",
            "openBISType": "JSON",
            "description": "Initial Z offset",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "z_spectroscopy_sweep_distance": {
            "type": "object",
            "openBISType": "JSON",
            "description": "Sweep distance",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "z_spectroscopy_time_between_forward_backward": {
            "type": "object",
            "openBISType": "JSON",
            "description": "Time to wait in seconds between the forward and the backward sweep",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "current_setpoint": {
            "title": "Current setpoint",
            "type": "object",
            "openBISType": "JSON",
            "description": "Current setpoint",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "current_calibration_factor": {
            "title": "Current calibration factor",
            "type": "object",
            "openBISType": "JSON",
            "description": "Current calibration factor",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "current_calibration_offset": {
            "title": "Current calibration offset",
            "type": "object",
            "openBISType": "JSON",
            "description": "Current calibration offset",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "current_gain": {
            "title": "Current gain",
            "type": "object",
            "openBISType": "JSON",
            "description": "Current gain",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "z": {
            "title": "Z",
            "type": "object",
            "openBISType": "JSON",
            "description": "Tip position in Z axis",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "feedback_active": {
            "title": "Feedback active",
            "type": "string",
            "openBISType": "CONTROLLEDVOCABULARY",
            "description": "Whether feedback is active",
            "enum": ["active", "inactive"]
        },
        "feedback_type": {
            "title": "Feedback type",
            "type": "string",
            "openBISType": "CONTROLLEDVOCABULARY",
            "description": "Feedback type",
            "enum": ["Log current", "Abs current"]
        },
        "z_controller_setpoint": {
            "title": "Z-controller setpoint",
            "type": "object",
            "openBISType": "JSON",
            "description": "Z-Controller setpoint",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "z_controller_p_gain": {
            "title": "Z-controller proportional gain",
            "type": "number",
            "openBISType": "REAL",
            "description": "Z-Controller proportional gain"
        },
        "z_controller_i_gain": {
            "title": "Z-controller integral gain",
            "type": "number",
            "openBISType": "REAL",
            "description": "Z-Controller integral gain"
        },
        "z_controller_time_constant": {
            "title": "Z-controller time constant",
            "type": "object",
            "openBISType": "JSON",
            "description": "Z-Controller time constant",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "z_controller_tip_lift": {
            "title": "Position of the tip when feedback loop is off",
            "type": "object",
            "openBISType": "JSON",
            "description": "Position of the tip when feedback loop is off",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "z_controller_switch_off_delay": {
            "title": "Time delay applied when switching off feedback loop",
            "type": "object",
            "openBISType": "JSON",
            "description": "Time delay applied when switching off feedback loop",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "lock_in_status": {
            "type": "boolean",
            "openBISType": "BOOLEAN",
            "description": "If lock-in is on or not."
        },
        "lock_in_modulated_signal": {
            "type": "string",
            "openBISType": "VARCHAR",
            "description": "Signal on which the modulation (sine) will be added"
        },
        "lock_in_frequency": {
            "type": "object",
            "openBISType": "JSON",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "lock_in_amplitude": {
            "type": "object",
            "openBISType": "JSON",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "lock_in_hp_filter_cutoffs": {
            "type": "array",
            "openBISType": "JSON",
            "description": "Cutoff frequency of the high-pass filter applied on the demodulation signal",
            "items": {
                "type": "object",
                "properties": {
                    "value": {
                        "type": "number"
                    },
                    "unit": {
                        "type": "string"
                    }
                }
            }
        },
        "lock_in_hp_filter_orders": {
            "type": "array",
            "openBISType": "ARRAY_INTEGER",
            "description": "Cutoff frequency of the high-pass filter applied on the demodulation signal",
            "items": {
                "type": "integer",
                "minimum": 0
            }
        },
        "lock_in_demodulated_signal": {
            "type": "string",
            "openBISType": "CONTROLLEDVOCABULARY",
            "description": "Signal which will be demodulated",
            "enum": ["Current"]
        },
        "lock_in_harmonics": {
            "type": "array",
            "openBISType": "ARRAY_INTEGER",
            "description": "Order of the harmonic oscillation to detect on the demodulated signal",
            "items": {
                "type": "integer",
                "minimum": 0
            }
        },
        "lock_in_reference_phases": {
            "type": "array",
            "openBISType": "JSON",
            "description": "Reference phase for the sine on the demodulated signal with respect to the modulation signal",
            "items": {
                "type": "object",
                "properties": {
                    "value": {
                        "type": "number"
                    },
                    "unit": {
                        "type": "string"
                    }
                }
            }
        },
        "lock_in_lp_filter_cutoffs": {
            "type": "array",
            "openBISType": "JSON",
            "description": "Cutoff frequency of the low-pass filter applied on the demodulation signal",
            "items": {
                "type": "object",
                "properties": {
                    "value": {
                        "type": "number"
                    },
                    "unit": {
                        "type": "string"
                    }
                }
            }
        },
        "lock_in_lp_filter_orders": {
            "type": "array",
            "openBISType": "ARRAY_INTEGER",
            "description": "Cutoff frequency of the low-pass filter applied on the demodulation signal",
            "items": {
                "type": "integer",
                "minimum": 0
            }
        },
        "lock_in_sync_filter": {
            "type": "boolean",
            "openBISType": "BOOLEAN",
            "description": "If use sync filter (Operates after the low-pass filter and averages the demodulated signals over one period of the modulation frequency"
        },
        "sample_temperature": {
            "title": "Sample temperature",
            "description": "Sample temperature",
            "type": "object",
            "openBISType": "JSON",
            "properties": {
                "value": {
                    "type": "number"
                },
                "unit": {
                    "type": "string"
                }
            }
        },
        "wfms_uuid": {
            "title": "WFMS UUID",
            "type": "string",
            "openBISType": "VARCHAR",
            "description": "Unique identifier of the simulation object in the WFMS"
        },
        "comments": {
            "title": "Comments",
            "type": "string",
            "openBISType": "MULTILINE_VARCHAR",
            "description": "Comments"
        },
        "annealing": {
            "$ref": "./annealing.schema.json",
            "description": "Details about the annealing before the STS"
        },
        "deposition": {
            "$ref": "./deposition.schema.json",
            "description": "Details about the deposition before the STS"
        },
        "instrument": {
            "$ref": "./instrument.schema.json"
        }
    },
    "additionalProperties": false,
    "required": ["name", "recording_time", "duration", "bias_settings", "current_settings", "z"]
}
